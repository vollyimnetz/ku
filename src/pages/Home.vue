<template>
  <div class="appOverview text-center">
    <router-link :to="{ name: 'controll' }" class="mainBtn btn btn-primary btn-lg ma-1">zum Kontrollraum</router-link>
    <router-link :to="{ name: 'monitor' }" class="mainBtn btn btn-primary btn-lg ma-1">zum Monitor</router-link>
    <div class="localIp">
      Lokale IP: <span v-if="localIp!==''">{{localIp}}</span><span v-if="localIp===''">{{localIp}}</span><br />
      <small>(Im Tablet als URL aufrufen, um diese Seite angezeigt zu bekommen.)</small>
    </div>
    <div class="topMenu dark">
      <a class="btn btn-primary btn-lg" @click="toggleFullscreen()"><span class="glyphicon glyphicon-resize-full" aria-hidden="true"></span></a>
    </div>
  </div>
</template>

<script>
import targetServer from '../services/target-server';
import fullscreen from '../services/fullscreen';

export default {
  components: {},
  mounted() {
    this.getLocalIp();
  },
  data: () => ({
    localIp: ''
  }),
  methods: {
    toggleFullscreen() {
      if(fullscreen.isFullscreen()) {
        fullscreen.exitFullscreen();
        return;
      }
      fullscreen.doFullscreen();
    },
    getLocalIp() {
      fetch(targetServer.get()+'my-local-ip', {
          method: 'GET',
        })
        .then(response => response.json())
        .then(data => {
          this.localIp = data.result;
        })
        .catch((error) => {
          this.localIp = '127.0.0.1';
        });
    }
  }
}
</script>